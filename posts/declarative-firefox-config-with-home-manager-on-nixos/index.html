<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <link rel="icon" href="/image/icon.webp" type="image/icon type" -->
    
    <link href="/css/dark.css" rel="stylesheet" id="stylesheet">
    <title>james mclaren</title>
  </head>
  <body>
  <script src="https://kit.fontawesome.com/460d3298b2.js" crossorigin="anonymous"></script>
  <script src="/js/toggle.js"></script>

  <div class="nav left-right">
    <div class="left">
      <a href="/" class="title nav-left-item squishy">james mclaren</a>
      <button id="themeButton" class="toggle-button nav-left-item squishy" onclick="toggleTheme()">
<i class="fa-solid fa-circle-half-stroke"></i>
      </button>
    </div>
    <div class="right">
      
        <a class="nav-right-item squishy" href="/posts/">all posts</a>
      
        <a class="nav-right-item squishy" href="/tags/">topics</a>
      
    </div>
  </div>
  
  <div class="body-container">


<div class="body-container">
  <h3>declarative firefox config with home-manager on nixos</h3>
  <p>As a man who finds himself reinstalling his OS more than is probably sensible, any opportunity to minimise the post install admin of sorting out all your settings is an attractive one. With that in mind lets take a look at some of the firefox (my current browser of choice) configuration options avilable to you through home-manager. This assumes you have some sort of home-manager setup working. If you do not I found <a href="https://github.com/misterio77/nix-starter-configs">this</a> friendly githubber&rsquo;s templates to be very helpful.</p>
<p>First of all you&rsquo;ll need to enable firefox with <code>programs.firefox.enable = true;</code></p>
<h3 id="extensions">EXTENSIONS</h3>
<p>This will require having the NUR (nix user repo) enabled. But once you do, you can configure any extension you want to be auto installed with something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>{pkgs<span style="color:#fe8019">,</span> <span style="color:#fe8019">...</span> }:
</span></span><span style="display:flex;"><span>  <span style="color:#fe8019">let</span>
</span></span><span style="display:flex;"><span>    addons <span style="color:#fe8019">=</span> pkgs<span style="color:#fe8019">.</span>nur<span style="color:#fe8019">.</span>repos<span style="color:#fe8019">.</span>rycee<span style="color:#fe8019">.</span>firefox-addons;
</span></span><span style="display:flex;"><span>  <span style="color:#fe8019">in</span>
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    programs<span style="color:#fe8019">.</span>firefox <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>      extensions <span style="color:#fe8019">=</span> <span style="color:#fe8019">with</span> addons; [
</span></span><span style="display:flex;"><span>        ublock-origin
</span></span><span style="display:flex;"><span>        bitwarden
</span></span><span style="display:flex;"><span>        darkreader
</span></span><span style="display:flex;"><span>      ];
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>This is the list of <a href="https://nur.nix-community.org/repos/rycee/">all extensions</a> available in the repo.</p>
<h3 id="bookmarks">BOOKMARKS</h3>
<p>Bookmarks can be added per profile. The format for it goes something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>profiles<span style="color:#fe8019">.</span>james = {
</span></span><span style="display:flex;"><span>  bookmarks <span style="color:#fe8019">=</span> [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>	  name <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;best website ever!&#34;</span>;
</span></span><span style="display:flex;"><span>      url <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;https://jdysmcl.xyz&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>	  name <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;best OS ever&#34;</span>;
</span></span><span style="display:flex;"><span>      url <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;https://nixos.org&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ];
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="settings">SETTINGS</h3>
<p>Again, these can be added per profile. Basically, any option you can find in about:config can be added here; this is a selection of potentially useful options I have set:</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>profiles<span style="color:#fe8019">.</span>james = {
</span></span><span style="display:flex;"><span>  settings <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">#newtab stuff</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;browser.startup.homepage&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;https://searx.jdysmcl.xyz&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;browser.newtabpage.enabled&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#d3869b">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;browser.newtabpage.activity-stream.enabled&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#d3869b">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">#some firefox features i don&#39;t really want</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;extensions.pocket.enabled&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#d3869b">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;extensions.formautofill.creditCards.enabled&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#d3869b">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;identity.fxaccounts.enabled&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#d3869b">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;signon.rememberSignons&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#d3869b">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;browser.search.suggest.enabled&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#d3869b">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#928374;font-style:italic">#some privacy stuff</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;privacy.resistFingerprinting&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#d3869b">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;privacy.trackingprotection.enabled&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#d3869b">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;dom.security.https_only_mode&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#d3869b">true</span>;
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>Of course I am sure there are many more exciting things that could be done here but this is as far as I have got. For all avilable options you can check out <a href="https://nix-community.github.io/home-manager/options.html">this</a> or alternatively run a <code>man home-configuration.nix</code>. Hope this has been helpful :)</p>

</div>

<footer>
  <small>
    <div class="foot-message">made with <a href="https://gohugo.io">hugo</a> and <a href="https://github.com/ryfrd/hugo-goose">hugo-goose</a></div>
  </small>
</footer>
</div> 
</body>
</html>

