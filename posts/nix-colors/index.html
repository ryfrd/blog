<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <link rel="icon" href="/image/icon.webp" type="image/icon type" -->
    
    <link href="/drk.css" rel="stylesheet" id="stylesheet">
    <title>james mclaren</title>
  </head>
  <body>
  <script src="https://kit.fontawesome.com/460d3298b2.js" crossorigin="anonymous"></script>
  <script src="/tggl.js"></script>

  <div class="nav left-right">
    <div class="left">
      <a href="/" class="title nav-left-item squishy">james mclaren</a>
      <button id="themeButton" class="toggle-button nav-left-item squishy" onclick="toggleTheme()">
<i class="fa-solid fa-circle-half-stroke"></i>
      </button>
    </div>
    <div class="right">
      
        <a class="nav-right-item squishy" href="/posts/">all posts</a>
      
        <a class="nav-right-item squishy" href="/tags/">topics</a>
      
    </div>
  </div>
  
  <div class="body-container">


<div class="body-container">
  <h3>theming nirvana</h3>
  <p>As I fall deeper and deeper down the nixos rabbit hole, I find myself becoming more and more obsessed with controlling every little thing on my computers declaratively. It starts with: &lsquo;oh this is cool I can specify which desktop environment to use in my configuration.nix&rsquo;. Next thing you know you&rsquo;ve discovered <a href="https://github.com/nix-community/home-manager">home-manager</a> and every program on every linux system you use needs to be controlled in your nix-config. Of course this slightly insane approach has its downsides; it also opens some doors though.</p>
<p><a href="https://sr.ht/~misterio/nix-colors/">Nix-colors</a> lets you dyanmically change the theming of programs controlled in your nix config. So when you want to change the color of everything and have it match and all be pretty lol, you are able to do so with one word as opposed to poring over everything changing each individual color. For a certain type of person, this is very nice!</p>
<h3 id="how-to-make-it-work">how to make it work</h3>
<p>This will be a quick rundown of how I&rsquo;ve got things set up; this is basically just a rehash of <a href="https://sr.ht/~misterio/nix-colors/#setup">this</a>.</p>
<p>First of all, you need to add nix-colors to your flake inputs and then point home-manager in its direction. The relevant parts of my <code>flake.nix</code> look something like this.</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  inputs <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>    nix-colors<span style="color:#fe8019">.</span>url <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;github:misterio77/nix-colors&#34;</span>;
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>  homeConfigurations <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;randy@computer&#34;</span> <span style="color:#fe8019">=</span> home-manager<span style="color:#fe8019">.</span>lib<span style="color:#fe8019">.</span>homeManagerConfiguration {
</span></span><span style="display:flex;"><span>      extraSpecialArgs <span style="color:#fe8019">=</span> { <span style="color:#fe8019">inherit</span> nix-colors; };
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then you can import the module into your home-manager config, specify a scheme (<a href="https://github.com/tinted-theming/base16-schemes">available schemes here</a>), and get to theming.</p>
<p>Here&rsquo;s a simple example where I make my dunst notifications follow the everforest theme.</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>{ pkgs<span style="color:#fe8019">,</span> config<span style="color:#fe8019">,</span> nix-colors<span style="color:#fe8019">,</span> <span style="color:#fe8019">...</span> }: {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  imports <span style="color:#fe8019">=</span> [
</span></span><span style="display:flex;"><span>    nix-colors<span style="color:#fe8019">.</span>homeManagerModule
</span></span><span style="display:flex;"><span>  ];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  colorScheme <span style="color:#fe8019">=</span> nix-colors<span style="color:#fe8019">.</span>colorSchemes<span style="color:#fe8019">.</span>everforest;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  services<span style="color:#fe8019">.</span>dunst <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>    enable <span style="color:#fe8019">=</span> <span style="color:#d3869b">true</span>;
</span></span><span style="display:flex;"><span>	urgency_normal <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>	  background <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;#</span><span style="color:#b8bb26">${</span>config<span style="color:#fe8019">.</span>colorScheme<span style="color:#fe8019">.</span>colors<span style="color:#fe8019">.</span>base01<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;</span>;
</span></span><span style="display:flex;"><span>	  foreground <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;#</span><span style="color:#b8bb26">${</span>config<span style="color:#fe8019">.</span>colorScheme<span style="color:#fe8019">.</span>colors<span style="color:#fe8019">.</span>base05<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;</span>;
</span></span><span style="display:flex;"><span>	};
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="a-couple-of-additional-tips-and-tricks">a couple of additional tips and tricks</h3>
<p>First tip and trick: generate and dynamically alter gtk themes depending on current nix-colors theme.</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>{ config<span style="color:#fe8019">,</span> pkgs<span style="color:#fe8019">,</span> inputs<span style="color:#fe8019">,</span> <span style="color:#fe8019">...</span> }:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fe8019">let</span>
</span></span><span style="display:flex;"><span>  <span style="color:#fe8019">inherit</span> (inputs<span style="color:#fe8019">.</span>nix-colors<span style="color:#fe8019">.</span>lib-contrib { <span style="color:#fe8019">inherit</span> pkgs; }) gtkThemeFromScheme;
</span></span><span style="display:flex;"><span><span style="color:#fe8019">in</span> <span style="color:#fe8019">rec</span> {
</span></span><span style="display:flex;"><span>  gtk <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>    enable <span style="color:#fe8019">=</span> <span style="color:#d3869b">true</span>;
</span></span><span style="display:flex;"><span>    theme <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>      name <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;</span><span style="color:#b8bb26">${</span>config<span style="color:#fe8019">.</span>colorScheme<span style="color:#fe8019">.</span>slug<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;</span>;
</span></span><span style="display:flex;"><span>      package <span style="color:#fe8019">=</span> gtkThemeFromScheme { scheme <span style="color:#fe8019">=</span> config<span style="color:#fe8019">.</span>colorScheme; };
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  services<span style="color:#fe8019">.</span>xsettingsd <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>    enable <span style="color:#fe8019">=</span> <span style="color:#d3869b">true</span>;
</span></span><span style="display:flex;"><span>    settings <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#b8bb26">&#34;Net/ThemeName&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;</span><span style="color:#b8bb26">${</span>gtk<span style="color:#fe8019">.</span>theme<span style="color:#fe8019">.</span>name<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#b8bb26">&#34;Net/IconThemeName&#34;</span> <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#34;</span><span style="color:#b8bb26">${</span>gtk<span style="color:#fe8019">.</span>iconTheme<span style="color:#fe8019">.</span>name<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;</span>;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Second tip and trick: if you&rsquo;re not using nix to configure everything you can still pass your colors across in the relevant format with <code>home.file</code>. I do this for qtile.</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nix" data-lang="nix"><span style="display:flex;"><span>{config<span style="color:#fe8019">,</span> pkgs<span style="color:#fe8019">,</span> <span style="color:#fe8019">...</span> }:
</span></span><span style="display:flex;"><span>  <span style="color:#fe8019">let</span>
</span></span><span style="display:flex;"><span>    c <span style="color:#fe8019">=</span> config<span style="color:#fe8019">.</span>colorScheme<span style="color:#fe8019">.</span>colors;
</span></span><span style="display:flex;"><span>  <span style="color:#fe8019">in</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  home<span style="color:#fe8019">.</span>file <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#b8bb26">&#34;.config/qtile/colors.py&#34;</span> <span style="color:#fe8019">=</span> {
</span></span><span style="display:flex;"><span>	  text <span style="color:#fe8019">=</span> <span style="color:#b8bb26">&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">        scheme = {
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">          &#39;yellow&#39;: &#34;#</span><span style="color:#b8bb26">${</span>c<span style="color:#fe8019">.</span>base0A<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">          &#39;orange&#39;: &#34;#</span><span style="color:#b8bb26">${</span>c<span style="color:#fe8019">.</span>base09<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;,	
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">          &#39;red&#39;: &#34;#</span><span style="color:#b8bb26">${</span>c<span style="color:#fe8019">.</span>base0F<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;,	
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">          &#39;magenta&#39;: &#34;#</span><span style="color:#b8bb26">${</span>c<span style="color:#fe8019">.</span>base08<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;,	
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">          &#39;violet&#39;: &#34;#</span><span style="color:#b8bb26">${</span>c<span style="color:#fe8019">.</span>base0E<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">          &#39;blue&#39;: &#34;#</span><span style="color:#b8bb26">${</span>c<span style="color:#fe8019">.</span>base0D<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">          &#39;cyan&#39;: &#34;#</span><span style="color:#b8bb26">${</span>c<span style="color:#fe8019">.</span>base0C<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;,	
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">          &#39;green&#39;: &#34;#</span><span style="color:#b8bb26">${</span>c<span style="color:#fe8019">.</span>base0B<span style="color:#b8bb26">}</span><span style="color:#b8bb26">&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">        }
</span></span></span><span style="display:flex;"><span><span style="color:#b8bb26">      &#39;&#39;</span>;
</span></span><span style="display:flex;"><span>	};
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>You can then import the colors into your <code>config.py</code> and use them as you see fit.</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fe8019">from</span> colors <span style="color:#fe8019">import</span> scheme
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>layouts <span style="color:#fe8019">=</span> [
</span></span><span style="display:flex;"><span>    layout<span style="color:#fe8019">.</span>MonadTall(
</span></span><span style="display:flex;"><span>	    border_normal <span style="color:#fe8019">=</span> scheme[<span style="color:#b8bb26">&#39;yellow&#39;</span>],
</span></span><span style="display:flex;"><span>	    border_focus <span style="color:#fe8019">=</span> scheme[<span style="color:#b8bb26">&#39;green&#39;</span>],
</span></span><span style="display:flex;"><span>	),
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>That&rsquo;s it for today. Thank you to the <a href="https://github.com/Misterio77">hero</a> that made this.</p>

</div>

<footer>
  <small>
    <div class="foot-message">made with <a href="https://gohugo.io">hugo</a> and <a href="https://github.com/ryfrd/hugo-goose">hugo-goose</a></div>
  </small>
</footer>
</div> 
</body>
</html>

