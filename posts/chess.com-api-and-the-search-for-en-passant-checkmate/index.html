<!DOCTYPE html>
<html  lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <link rel="icon" href="/image/icon.webp" type="image/icon type" -->
    
    <link href="/css/dark.css" rel="stylesheet" id="stylesheet">
    <title>dymc.win</title>
  </head>
  <body>
  
    <div class="lr nav-container">
    <div class="l">
      <a class="nav-title" href="/">
          dymc.win
      </a>
      <button id="themeButton" onclick="toggleTheme()" class="theme-button">
          toggle theme
      </button>
    </div>
    <div class="r">
        
          <a class="nav-link" href="/posts/">posts</a>
        
          <a class="nav-link" href="/tags/">topics</a>
        
    </div>
  </div>

  <div class="body-container">

  


<div class="main-container">
  chess.com api and the search for en passant checkmate
  <p>The chess.com API gives you access to a crazy amount of data on games played on the site. Armed with the knowledge that this data was at my fingertips, I set out to do what any sane person would do: find en passant checkmates. For those not in the know, en passant check mate is kind of the king of moves in chess meme circles. So some sort of python script that identified en passant check mates that occured on the site would be of great value to me.</p>
<p>First things first, I would need a method of grabbing lots of games from the api. This would be achieved by looking at players on the site and searching their game archives. As I couldn&rsquo;t think of any obvious way to get completely random players on the site, I used the API&rsquo;s lists of all titled players (GM, IM, WIM, etc.) on the site. This is what I came up with -&gt;</p>
<div class="highlight"><div style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">def</span> <span style="color:#88c0d0">get_archive_urls</span><span style="color:#eceff4">(</span>titled_urls<span style="color:#eceff4">):</span>
</span></span><span style="display:flex;"><span>	  players <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[]</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#81a1c1;font-weight:bold">for</span> url <span style="color:#81a1c1;font-weight:bold">in</span> titled_urls<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>		  title_list <span style="color:#81a1c1">=</span> requests<span style="color:#81a1c1">.</span>get<span style="color:#eceff4">(</span>url<span style="color:#eceff4">)</span><span style="color:#81a1c1">.</span>json<span style="color:#eceff4">()</span>
</span></span><span style="display:flex;"><span>		  title_list <span style="color:#81a1c1">=</span> title_list<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#39;players&#39;</span><span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>		  players<span style="color:#81a1c1">.</span>extend<span style="color:#eceff4">(</span>title_list<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	  archive_urls <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[]</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#81a1c1;font-weight:bold">for</span> username <span style="color:#81a1c1;font-weight:bold">in</span> players<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>		  games <span style="color:#81a1c1">=</span> <span style="color:#a3be8c">&#39;https://api.chess.com/pub/player/&#39;</span> <span style="color:#81a1c1">+</span> username <span style="color:#81a1c1">+</span> <span style="color:#a3be8c">&#39;/games/2022/05&#39;</span>
</span></span><span style="display:flex;"><span>		  archive_urls<span style="color:#81a1c1">.</span>append<span style="color:#eceff4">(</span>games<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#81a1c1;font-weight:bold">return</span> archive_urls
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  get_archive_urls<span style="color:#eceff4">([</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#a3be8c">&#39;https://api.chess.com/pub/titled/GM&#39;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#a3be8c">&#39;https://api.chess.com/pub/titled/WGM&#39;</span>
</span></span><span style="display:flex;"><span>	  <span style="color:#eceff4">])</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>This function reads a list of urls, gets a list of all the usernames from the api and then inserts this username into a new url which will allow us to access their games from a particular month. I then returns a list of all of these game archive urls.</p>
<p>The next order of business is taking this list of urls and turning it into a list of games. It looks quite similar to the previous example -&gt;</p>
<div class="highlight"><div style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>  <span style="color:#81a1c1;font-weight:bold">def</span> <span style="color:#88c0d0">grab_games</span><span style="color:#eceff4">(</span>archive_urls<span style="color:#eceff4">):</span>
</span></span><span style="display:flex;"><span>    games <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">for</span> url <span style="color:#81a1c1;font-weight:bold">in</span> archive_urls<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>        archive <span style="color:#81a1c1">=</span> requests<span style="color:#81a1c1">.</span>get<span style="color:#eceff4">(</span>url<span style="color:#eceff4">)</span><span style="color:#81a1c1">.</span>json<span style="color:#eceff4">()</span>
</span></span><span style="display:flex;"><span>        archive_games <span style="color:#81a1c1">=</span> archive<span style="color:#eceff4">[</span><span style="color:#a3be8c">&#39;games&#39;</span><span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>        games<span style="color:#81a1c1">.</span>extend<span style="color:#eceff4">(</span>archive_games<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#81a1c1;font-weight:bold">return</span> games
</span></span></code></pre></td></tr></table>
</div>
</div><p>Feeding the first function into the second -&gt;</p>
<div class="highlight"><div style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#6c6f74">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>  grab_games<span style="color:#eceff4">(</span>get_archive_urls<span style="color:#eceff4">([</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a3be8c">&#39;https://api.chess.com/pub/titled/GM&#39;</span><span style="color:#eceff4">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a3be8c">&#39;https://api.chess.com/pub/titled/WGM&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#eceff4">]))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>We get a very long list of json objects (is that the right phrase? um). Each corresponding to one of games played by GMs and WGMs on chess.com during May of 2022. Come back next time to see what we can do with this very long list. Here&rsquo;s a taster of what the list looks like printed to a terminal - lots of possiblities.</p>
<p><img src="/image/output.webp" alt="image alt text"></p>

</div>

</div> 
<div class="foot-container">
    <div class="foot-item">
    
      <a href="/index.xml">rss</a>
    
      <a href="https://github.com/ryfrd">github</a>
    
    </div>
    <div class="foot-item">
    made with <a href="https://gohugo.io">hugo</a> and my wonky theme <a href="https://github.com/ryfrd/hugo-goose">hugo-goose</a>
    </div>
  </div>

  <script src="/js/toggle.js"></script>
</body>
</html>

